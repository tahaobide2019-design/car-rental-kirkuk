<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlTag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø³Ø·ÙˆÙ„ Ø§Ù„Ø­ÙˆØª | Ø§Ø®ØªØ± Ø³ÙŠØ§Ø±ØªÙƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f0f2f5; transition: 0.5s; overflow-x: hidden; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø®Ø¯Ù…Ø© */
        .hero-bg { 
            background: linear-gradient(135deg, #002349 0%, #004d99 100%); 
            transition: 1s; 
            position: relative; 
            padding-top: 5rem;
            padding-bottom: 14rem;
            overflow: hidden;
            border-bottom: 4px solid #D4AF37;
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ø¶Ø®Ù… ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .map-pattern {
            position: absolute; inset: 0; opacity: 0.20; pointer-events: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><text y="60" x="10" font-size="45">ğŸš—</text></svg>');
            background-repeat: repeat; animation: bgMove 40s linear infinite;
        }
        @keyframes bgMove { from { background-position: 0 0; } to { background-position: 1000px 1000px; } }

        .city-overlay { position: absolute; inset: 0; opacity: 0.7; transition: 1s; pointer-events: none; }

        .whale-logo { font-size: 5rem; animation: floating 4s ease-in-out infinite; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.3)); }
        @keyframes floating { 0%, 100% { transform: translateY(0) rotate(-5deg); } 50% { transform: translateY(-15px) rotate(5deg); } }

        /* ØªØµÙ…ÙŠÙ… ÙƒØ±ÙˆØª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª */
        .car-card { 
            transition: all 0.4s ease; 
            border-radius: 3rem; 
            overflow: hidden; 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.05);
        }
        .car-card:hover { transform: translateY(-12px); border-color: #D4AF37; box-shadow: 0 25px 50px rgba(0,35,73,0.15); }
        
        .price-badge { background: #002349; color: #D4AF37; padding: 10px 22px; border-radius: 1.5rem; font-weight: 900; display: inline-block; }
        
        /* Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø°ÙƒÙŠØ© */
        .filter-box {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            border-radius: 3rem;
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.2);
            transform: translateY(-80px);
            position: relative;
            z-index: 30;
            border: 1px solid white;
        }

        select { -webkit-appearance: none; appearance: none; }
        .smart-select {
            padding: 1.1rem; background-color: #f8fafc; border-radius: 1.5rem;
            font-weight: 900; color: #002349; border: 2px solid transparent;
            transition: 0.3s; width: 100%; text-align: center; cursor: pointer;
        }
        .smart-select:focus { border-color: #D4AF37; background-color: #fff; }

        .btn-select { background: #002349; color: white; transition: 0.3s; font-weight: 900; border-radius: 1.5rem; }
        .btn-select:hover { background: #D4AF37; color: #002349; transform: scale(1.02); }
    </style>
</head>
<body class="text-[#002349]">

    <header class="hero-bg text-white pt-16 pb-32 text-center relative">
        <div id="cityOverlay" class="city-overlay"></div>
        <div id="patternBox" class="map-pattern"></div>
        
        <div class="container mx-auto px-6 relative z-10">
            <div class="whale-logo mb-4">ğŸ‹</div>
            <h1 id="pageTitle" class="text-4xl md:text-6xl font-black text-[#D4AF37] drop-shadow-md">Ø£Ø³Ø·ÙˆÙ„ Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­ÙˆØª</h1>
            <p id="serviceLabel" class="text-lg md:text-2xl opacity-90 mt-3 font-bold px-4 italic"></p>
        </div>
    </header>

    <main class="container mx-auto px-4 relative z-20 pb-20">
        <div class="filter-box p-6 md:p-8 max-w-5xl mx-auto flex flex-col md:flex-row gap-5 items-center justify-center">
            <div class="w-full md:w-1/3">
                <select id="engineFilter" onchange="renderFleet()" class="smart-select">
                    <option value="all" id="optEngAll">ÙƒÙ„ Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª</option>
                    <option value="hybrid" id="optEngHybrid">Ù‡Ø§ÙŠØ¨Ø±Ø¯</option>
                    <option value="auto" id="optEngAuto">Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ</option>
                </select>
            </div>
            <div class="w-full md:w-1/3">
                <select id="categoryFilter" onchange="renderFleet()" class="smart-select">
                    <option value="all" id="optCatAll">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
                    <option value="economy" id="optCatEco">Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©</option>
                    <option value="family" id="optCatFam">Ø¹Ø§Ø¦Ù„ÙŠØ© / SUV</option>
                    <option value="luxury" id="optCatLux">ÙØ§Ø®Ø±Ø© VIP</option>
                </select>
            </div>
        </div>

        <div id="fleetGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto"></div>
    </main>

    <script>
        const u = new URLSearchParams(window.location.search);
        const type = u.get('type') || 'personal'; 
        const currentLang = u.get('lang') || 'ar';
        const city = u.get('city') || 'ÙƒØ±ÙƒÙˆÙƒ';

        // Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
        const styleColor = { 'ÙƒØ±ÙƒÙˆÙƒ': '#004d40', 'Ø¨ØºØ¯Ø§Ø¯': '#1a237e', 'Ø£Ø±Ø¨ÙŠÙ„': '#2e7d32', 'Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©': '#6a1b9a', 'Ø§Ù„Ù…ÙˆØµÙ„': '#4e342e', 'Ø§Ù„Ø¨ØµØ±Ø©': '#0277bd', 'Ø§Ù„Ø£Ù†Ø¨Ø§Ø±': '#ef6c00', 'Ø¯ÙŠØ§Ù„Ù‰': '#558b2f' };
        
        const translations = {
            ar: { dir: 'rtl', font: 'Tajawal', title: 'Ø£Ø³Ø·ÙˆÙ„ Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­ÙˆØª', wedding: 'âœ¨ Ù‚Ø³Ù… Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­ÙÙ„Ø§Øª ÙˆØ§Ù„Ø£Ø¹Ø±Ø§Ø³', personal: 'ğŸš— Ù‚Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©', engAll: 'ÙƒÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª', engHyb: 'Ù‡Ø§ÙŠØ¨Ø±Ø¯ (Ù‡Ø¬ÙŠÙ†)', engAuto: 'Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ', catAll: 'ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª', catEco: 'Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©', catFam: 'Ø¹Ø§Ø¦Ù„ÙŠØ© / SUV', catLux: 'ÙØ§Ø®Ø±Ø© VIP', btn: 'Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø©', currency: 'Ø¯.Ø¹ / ÙŠÙˆÙ…', empty: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ§Ø±Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø« ğŸ‹' },
            ku: { dir: 'rtl', font: 'Tajawal', title: 'Ø¦Û•Ù„Ø­ÙˆÙˆØª ÙÙ„ÛØª', wedding: 'âœ¨ Ø¨Û•Ø´ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„ÛŒ Ø²Û•Ù…Ø§ÙˆÛ•Ù†Ø¯', personal: 'ğŸš— Ø¨Û•Ø´ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„ÛŒ Ú©Û•Ø³ÛŒ', engAll: 'Ù‡Û•Ù…ÙˆÙˆ Ø¨Ø²ÙˆÛÙ†Û•Ø±Û•Ú©Ø§Ù†', engHyb: 'Ù‡Ø§ÛŒØ¨Ø±ÛŒØ¯', engAuto: 'Ø¦Û†ØªÛ†Ù…Ø§ØªÛŒÚ©', catAll: 'Ù‡Û•Ù…ÙˆÙˆ Ø¬Û†Ø±Û•Ú©Ø§Ù†', catEco: 'Ø¦Ø§Ø¨ÙˆÙˆØ±ÛŒ', catFam: 'Ø®ÛØ²Ø§Ù†ÛŒ / SUV', catLux: 'Ù†Ø§ÙˆØ§Ø²Û• VIP', btn: 'Ù‡Û•ÚµØ¨Ú˜Ø§Ø±Ø¯Ù†ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„', currency: 'Ø¯.Ø¹ / Ú•Û†Ú˜', empty: 'Ø¨Ø¨ÙˆØ±Û•ØŒ Ù‡ÛŒÚ† Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„ÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• ğŸ‹' }
        };

        const fleet = [
            { name: {ar:"ØªÙˆÙŠÙˆØªØ§ ÙƒÙˆØ±ÙˆÙ„Ø§ 2025", ku:"ØªÛ†ÛŒÛ†ØªØ§ Ú©Û†Ø±Û†Ù„Ø§ Ù¢Ù Ù¢Ù¥"}, engine: "hybrid", cat: "economy", price: "45000", img: "Cars/corolla.jpg" },
            { name: {ar:"Ø¯ÙˆØ¯Ø¬ Ø¬Ø§Ø±Ø¬Ø± SRT", ku:"Ø¯Û†Ø¬ Ø¬Ø§Ø±Ø¬Û•Ø± SRT"}, engine: "auto", cat: "luxury", price: "85000", img: "Cars/charger.jpg" },
            { name: {ar:"Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ ØªÙˆØ³Ø§Ù†", ku:"Ù‡ÛŒÛ†Ù†Ø¯Ø§ÛŒ ØªÛ†Ø³Û†Ù†"}, engine: "auto", cat: "family", price: "60000", img: "Cars/tucson.jpg" },
            { name: {ar:"Ù…Ø±Ø³ÙŠØ¯Ø³ S-Class", ku:"Ù…ÛØ±Ø³ÛŒØ¯Ø³ S-Class"}, engine: "auto", cat: "luxury", price: "150000", img: "Cars/mercedes.jpg" },
            { name: {ar:"ØªÙˆÙŠÙˆØªØ§ ÙƒØ§Ù…Ø±ÙŠ", ku:"ØªÛ†ÛŒÛ†ØªØ§ Ú©Ø§Ù…Ø±ÛŒ"}, engine: "hybrid", cat: "economy", price: "55000", img: "Cars/camry.jpg" },
            { name: {ar:"ÙƒÙŠØ§ Ø³ÙˆØ±ÙŠÙ†ØªÙˆ", ku:"Ú©ÛŒØ§ Ø³Û†Ø±ÛÙ†ØªÛ†"}, engine: "auto", cat: "family", price: "70000", img: "Cars/sorento.jpg" }
        ];

        function initLang() {
            const l = translations[currentLang] || translations['ar'];
            document.getElementById('htmlTag').dir = l.dir;
            document.body.style.fontFamily = l.font + ', sans-serif';
            document.getElementById('pageTitle').innerText = l.title;
            document.getElementById('serviceLabel').innerText = type === 'wedding' ? l.wedding : l.personal;
            
            // ØªØ·Ø¨ÙŠÙ‚ Ù„ÙˆÙ† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
            document.getElementById('cityOverlay').style.backgroundColor = styleColor[city] || '#002349';

            // ØªØ·Ø¨ÙŠÙ‚ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            const icon = type === 'wedding' ? 'ğŸ' : 'ğŸš—';
            document.getElementById('patternBox').style.backgroundImage = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><text y="60" x="10" font-size="45">${icon}</text></svg>')`;

            document.getElementById('optEngAll').innerText = l.engAll;
            document.getElementById('optEngHybrid').innerText = l.engHyb;
            document.getElementById('optEngAuto').innerText = l.engAuto;
            document.getElementById('optCatAll').innerText = l.catAll;
            document.getElementById('optCatEco').innerText = l.catEco;
            document.getElementById('optCatFam').innerText = l.catFam;
            document.getElementById('optCatLux').innerText = l.catLux;
        }

        function renderFleet() {
            const eng = document.getElementById('engineFilter').value;
            const cat = document.getElementById('categoryFilter').value;
            const grid = document.getElementById('fleetGrid');
            const l = translations[currentLang] || translations['ar'];
            grid.innerHTML = '';

            const filtered = fleet.filter(car => (eng === 'all' || car.engine === eng) && (cat === 'all' || car.cat === cat));

            if (filtered.length === 0) {
                grid.innerHTML = `<div class="col-span-full text-center py-20 font-black text-slate-400 text-2xl">${l.empty}</div>`;
                return;
            }

            filtered.forEach(car => {
                const carName = car.name[currentLang] || car.name['ar'];
                grid.innerHTML += `
                    <div class="car-card p-5">
                        <img src="${car.img}" class="w-full h-56 object-cover rounded-[2.5rem] mb-5 shadow-inner" onerror="this.src='https://via.placeholder.com/400x250?text=Al-Hut+Car'">
                        <div class="px-2 ${l.dir === 'rtl' ? 'text-right' : 'text-left'}">
                            <h3 class="text-2xl font-black mb-3 text-slate-800">${carName}</h3>
                            <div class="price-badge text-lg mb-6">${parseInt(car.price).toLocaleString()} ${l.currency}</div>
                            <button onclick="selectCar('${carName}', '${car.price}')" class="btn-select w-full py-4 text-xl shadow-lg active:scale-95">
                                ${l.btn}
                            </button>
                        </div>
                    </div>
                `;
            });
        }

        function selectCar(name, price) {
            u.set('car', name);
            u.set('price', price);
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ø´Ø®ØµÙŠØ© Ø£Ùˆ Ø£Ø¹Ø±Ø§Ø³ Ù†Ø°Ù‡Ø¨ Ù„Ù„Ø¥Ø¶Ø§ÙØ§ØªØŒ ÙˆØ¥Ø°Ø§ ÙƒØ§Ù†Øª ØªØ¹Ù„ÙŠÙ… ØªØ°Ù‡Ø¨ Ù„ØµÙØ­Ø© Ø£Ø®Ø±Ù‰
            window.location.href = `addons.html?${u.toString()}`;
        }

        window.onload = () => { initLang(); renderFleet(); };
    </script>
</body>
</html>
