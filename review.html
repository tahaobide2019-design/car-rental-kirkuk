<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ | Ø§Ù„Ø­ÙˆØª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="p-4 bg-slate-50 text-right">
    <div class="max-w-xl mx-auto bg-white rounded-[3rem] shadow-2xl overflow-hidden border-t-[10px] border-[#002349]">
        <div class="bg-slate-900 p-8 text-center">
            <div id="rEmoji" class="text-6xl mb-2">ğŸ‹</div>
            <h2 class="text-2xl font-black text-[#D4AF37]">ØªØ£ÙƒÙŠØ¯ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h2>
        </div>

        <div class="p-8 space-y-6">
            <div class="bg-gray-50 p-6 rounded-[2rem] border border-gray-100 space-y-4">
                <div class="flex justify-between border-b pb-2"><span class="text-gray-400">Ø§Ù„Ø§Ø³Ù…:</span> <span id="rName" class="font-bold text-slate-800"></span></div>
                <div class="flex justify-between border-b pb-2"><span class="text-gray-400">Ø§Ù„Ø®Ø¯Ù…Ø©:</span> <span id="rCar" class="font-bold text-blue-700"></span></div>
                
                <div id="genderRow" class="hidden flex justify-between border-b pb-2"><span class="text-gray-400">Ø§Ù„Ø¬Ù†Ø³:</span> <span id="rGender" class="font-bold text-purple-700"></span></div>

                <div id="cargoInfo" class="hidden space-y-3 pt-2">
                    <div class="flex justify-between text-green-700"><span class="font-bold text-xs">Ø§Ù„Ù…Ø³Ø§ÙØ©:</span> <span id="rDist" class="font-black"></span></div>
                    <div class="flex justify-between bg-yellow-100 p-4 rounded-2xl border-2 border-yellow-300">
                        <span class="font-black text-yellow-800">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                        <span id="rPrice" class="font-black text-yellow-900 text-xl"></span>
                    </div>
                </div>

                <div class="flex justify-between"><span class="text-gray-400">Ø§Ù„Ù…ÙˆØ¹Ø¯:</span> <span id="rDateTime" class="font-bold"></span></div>
            </div>

            <button onclick="sendToWhatsApp()" class="w-full bg-[#002349] text-white py-5 rounded-2xl font-black text-xl shadow-xl flex items-center justify-center gap-3 active:scale-95 transition-all">
                Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ <i class="fab fa-whatsapp"></i>
            </button>
            
            <button onclick="history.back()" class="w-full text-gray-400 font-bold text-sm">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
    </div>

    <script>
        // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (URL)
        const params = new URLSearchParams(window.location.search);
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        document.getElementById('rEmoji').innerText = params.get('emoji') || 'ğŸ‹';
        document.getElementById('rName').innerText = params.get('name') || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        document.getElementById('rCar').innerText = params.get('car') || 'Ø®Ø¯Ù…Ø© Ø§Ù„Ø­ÙˆØª';
        document.getElementById('rDateTime').innerText = (params.get('date') || '') + " | " + (params.get('time') || '');

        // ÙØ­Øµ ÙƒÙˆØ±Ø³ Ø§Ù„ØªØ¹Ù„ÙŠÙ… (Ø§Ù„Ø¬Ù†Ø³)
        if(params.get('gender')) {
            document.getElementById('genderRow').classList.remove('hidden');
            document.getElementById('rGender').innerText = params.get('gender');
        }

        // ÙØ­Øµ Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ù…Ù„ (Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„Ù…Ø³Ø§ÙØ©)
        if(params.get('price')) {
            document.getElementById('cargoInfo').classList.remove('hidden');
            document.getElementById('rDist').innerText = params.get('dist') + " ÙƒÙ…";
            document.getElementById('rPrice').innerText = parseInt(params.get('price')).toLocaleString() + " Ø¯.Ø¹";
        }

        function sendToWhatsApp() {
            const name = params.get('name');
            const car = params.get('car');
            const date = params.get('date');
            const time = params.get('time');
            const emoji = params.get('emoji') || 'ğŸ‹';
            
            let locationPart = "";
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø³ÙŠØ§Ø±Ø© Ø­Ù…Ù„ (Ù†Ù‚Ø·ØªÙŠÙ†)
            if(params.get('slat')) {
                locationPart = `ğŸ“ Ù…ÙƒØ§Ù† Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚: https://www.google.com/maps?q=${params.get('slat')},${params.get('slng')}
ğŸ Ù…ÙƒØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„: https://www.google.com/maps?q=${params.get('elat')},${params.get('elng')}`;
            } else {
                locationPart = `ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: https://www.google.com/maps?q=${params.get('lat')},${params.get('lng')}`;
            }

            let pricePart = params.get('price') ? `ğŸ“ Ø§Ù„Ù…Ø³Ø§ÙØ©: ${params.get('dist')} ÙƒÙ…\nğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${parseInt(params.get('price')).toLocaleString()} Ø¯.Ø¹` : "";
            let genderPart = params.get('gender') ? `ğŸ‘« Ø§Ù„Ø¬Ù†Ø³: ${params.get('gender')}` : "";

            const finalMsg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø´Ø±ÙƒØ© Ø§Ù„Ø­ÙˆØª ${emoji}*
--------------------------
ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}
ğŸš— Ø§Ù„Ø®Ø¯Ù…Ø©: ${car}
${genderPart}
ğŸ“… Ø§Ù„Ù…ÙˆØ¹Ø¯: ${date} | ${time}
--------------------------
${pricePart}
--------------------------
${locationPart}
--------------------------
âœ… ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„.`;

            window.open(`https://wa.me/9647713225471?text=${encodeURIComponent(finalMsg)}`);
        }
    </script>
</body>
</html>
