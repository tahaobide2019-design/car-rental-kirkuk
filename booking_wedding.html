<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlTag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø¬Ø² Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø²ÙØ§Ù | Ø§Ù„Ø­ÙˆØª ğŸ‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #fffaf0; transition: 0.5s; }
        .wedding-gradient { background: linear-gradient(135deg, #002349 0%, #004080 100%); }
        .glass-input {
            width: 100%; padding: 1rem 1.25rem; background: #ffffff;
            border: 2px solid #f1e4bc; border-radius: 1.5rem;
            font-weight: 700; transition: 0.3s; outline: none;
        }
        .glass-input:focus { border-color: #D4AF37; box-shadow: 0 10px 20px rgba(212, 175, 55, 0.15); transform: translateY(-2px); }
        .wedding-card { background: white; border-radius: 3.5rem; box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.1); border: 1px solid #fdf2d5; }
        #map { height: 220px; border-radius: 2.5rem; border: 4px solid #fffaf0; z-index: 1; }
        .icon-circle {
            width: 45px; height: 45px; background: #fdf2d5; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; color: #b8962d;
        }
        [dir="rtl"] .icon-circle { margin-left: 12px; }
        [dir="ltr"] .icon-circle { margin-right: 12px; }
    </style>
</head>
<body class="text-[#002349]">

    <header class="wedding-gradient text-white pt-16 pb-44 text-center relative overflow-hidden">
        <div class="absolute top-0 left-0 opacity-10 text-[15rem] pointer-events-none">âœ¨</div>
        <h1 id="pageTitle" class="text-4xl font-black text-[#D4AF37] mb-2">Ù…Ø¨Ø§Ø±Ùƒ Ù„ÙƒÙ…Ø§! ğŸ’</h1>
        <p id="pageSub" class="text-lg opacity-90 font-light italic px-4">Ù†Ø­Ù† ÙØ®ÙˆØ±ÙˆÙ† Ø¨Ø£Ù† Ù†ÙƒÙˆÙ† Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† ÙŠÙˆÙ…ÙƒÙ… Ø§Ù„ÙƒØ¨ÙŠØ±</p>
    </header>

    <main class="container mx-auto px-4 -mt-32 relative z-10 pb-20">
        <div class="wedding-card p-8 md:p-12 max-w-4xl mx-auto">
            <div id="formGrid" class="grid grid-cols-1 md:grid-cols-2 gap-10">
                
                <div class="space-y-6">
                    <div class="flex items-center mb-4">
                        <div class="icon-circle"><i class="fas fa-heart"></i></div>
                        <h3 id="sec1Title" class="font-black text-xl text-[#b8962d]">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h3>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label id="lblName" class="block text-[10px] font-black text-slate-400 mr-4 mb-1 uppercase tracking-widest">Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø·Ù„Ø¨</label>
                            <input type="text" id="custName" class="glass-input">
                        </div>
                        <div>
                            <label id="lblPhone" class="block text-[10px] font-black text-slate-400 mr-4 mb-1 uppercase tracking-widest">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„ÙÙˆØ±ÙŠ</label>
                            <input type="tel" id="custPhone" placeholder="077XXXXXXXX" class="glass-input text-left" dir="ltr">
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="flex items-center mb-4">
                        <div class="icon-circle"><i class="fas fa-calendar-check"></i></div>
                        <h3 id="sec2Title" class="font-black text-xl text-[#b8962d]">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</h3>
                    </div>
                    <div class="bg-amber-50 p-6 rounded-[2rem] border border-amber-100">
                        <p id="lblSummary" class="text-xs text-amber-800 font-bold mb-2 italic">Ù…Ù„Ø®Øµ Ø§Ø®ØªÙŠØ§Ø±Ùƒ:</p>
                        <div id="summary" class="text-sm font-black space-y-1 text-[#002349]"></div>
                    </div>
                </div>

                <div class="md:col-span-2 space-y-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center">
                            <div class="icon-circle"><i class="fas fa-map-marker-alt"></i></div>
                            <h3 id="sec3Title" class="font-black text-xl text-[#b8962d]">Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­ÙÙ„Ø©</h3>
                        </div>
                        <button onclick="getLocation()" class="text-xs font-black text-amber-600 border-b border-amber-600">
                             <span id="btnGPS">ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ</span> ğŸ›°ï¸
                        </button>
                    </div>
                    <div id="map"></div>
                </div>

                <div class="md:col-span-2 pt-6">
                    <button onclick="confirmWedding()" class="w-full bg-[#D4AF37] text-[#002349] py-6 rounded-[2rem] font-black text-2xl shadow-2xl hover:bg-[#b8962d] transition-all transform active:scale-95 flex items-center justify-center gap-4 group">
                        <span id="btnSubmit">ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</span>
                        <i class="fas fa-star group-hover:rotate-180 transition-transform duration-500"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        let map, marker;
        const u = new URLSearchParams(window.location.search);
        const currentLang = u.get('lang') || 'ar';

        const data = {
            ar: { dir: 'rtl', font: 'Tajawal', title: 'Ù…Ø¨Ø§Ø±Ùƒ Ù„ÙƒÙ…Ø§! ğŸ’', sub: 'Ù†Ø­Ù† ÙØ®ÙˆØ±ÙˆÙ† Ø¨Ø£Ù† Ù†ÙƒÙˆÙ† Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† ÙŠÙˆÙ…ÙƒÙ… Ø§Ù„ÙƒØ¨ÙŠØ±', sec1: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²', name: 'Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø·Ù„Ø¨', phone: 'Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„', sec2: 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©', sum: 'Ù…Ù„Ø®Øµ Ø§Ø®ØªÙŠØ§Ø±Ùƒ:', car: 'Ø§Ù„Ø³ÙŠØ§Ø±Ø©:', loc: 'Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­ÙÙ„Ø© Ø£Ùˆ Ø§Ù„ØªØ³Ù„ÙŠÙ…', gps: 'ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ', submit: 'ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©', alert: 'ÙŠØ±Ø¬Ù‰ ØªØ²ÙˆÙŠØ¯Ù†Ø§ Ø¨Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ğŸ‹ğŸ’' },
            ku: { dir: 'rtl', font: 'Tajawal', title: 'Ù¾ÛŒØ±Û†Ø²Û•! ğŸ’', sub: 'Ø´Ø§Ù†Ø§Ø²ÛŒ Ø¯Û•Ú©Û•ÛŒÙ† Ú©Û• Ø¨Û•Ø´ÛÚ© Ø¨ÛŒÙ† Ù„Û• Ú•Û†Ú˜Û• Ú¯Û•ÙˆØ±Û•Ú©Û•ØªØ§Ù†', sec1: 'Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ø­ÛŒØ¬Ø²', name: 'Ù†Ø§ÙˆÛŒ Ø®Ø§ÙˆÛ•Ù† Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ', phone: 'Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„', sec2: 'ÙˆØ±Ø¯Û•Ú©Ø§Ø±ÛŒ Ø¨Û†Ù†Û•Ú©Û•', sum: 'Ú©ÙˆØ±ØªÛ•ÛŒ Ù‡Û•ÚµØ¨Ú˜Ø§Ø±Ø¯Ù†Û•Ú©Û•Øª:', car: 'Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„:', loc: 'Ø´ÙˆÛÙ†ÛŒ Ø¨Û†Ù†Û•Ú©Û•', gps: 'Ø´ÙˆÛÙ†Û•Ú©Û•Ù… Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•', submit: 'ØªÛ•ÙˆØ§ÙˆÚ©Ø±Ø¯Ù†ÛŒ Ø­ÛŒØ¬Ø²', alert: 'ØªÚ©Ø§ÛŒÛ• Ù†Ø§Ùˆ Ùˆ Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„ Ø¨Ù†ÙˆÙˆØ³Û• ğŸ‹ğŸ’' },
            tr: { dir: 'ltr', font: 'Poppins', title: 'Tebrikler! ğŸ’', sub: 'BÃ¼yÃ¼k gÃ¼nÃ¼nÃ¼zÃ¼n bir parÃ§asÄ± olmaktan gurur duyuyoruz', sec1: 'Rezervasyon Bilgileri', name: 'Ad Soyad', phone: 'Ä°letiÅŸim NumarasÄ±', sec2: 'Etkinlik DetaylarÄ±', sum: 'SeÃ§im Ã–zeti:', car: 'AraÃ§:', loc: 'Etkinlik Konumu', gps: 'Konumumu Bul', submit: 'Rezervasyonu Onayla', alert: 'LÃ¼tfen adÄ±nÄ±zÄ± ve telefon numaranÄ±zÄ± girin ğŸ‹ğŸ’' },
            en: { dir: 'ltr', font: 'Poppins', title: 'Congratulations! ğŸ’', sub: 'We are proud to be part of your big day', sec1: 'Booking Details', name: 'Full Name', phone: 'Contact Number', sec2: 'Event Details', sum: 'Your Selection:', car: 'Car:', loc: 'Event Location', gps: 'Get Location', submit: 'Confirm Celebration Booking', alert: 'Please provide your name and phone number ğŸ‹ğŸ’' }
        };

        function initLang() {
            const l = data[currentLang];
            document.getElementById('htmlTag').dir = l.dir;
            document.body.style.fontFamily = l.font + ', sans-serif';
            document.getElementById('pageTitle').innerText = l.title;
            document.getElementById('pageSub').innerText = l.sub;
            document.getElementById('sec1Title').innerText = l.sec1;
            document.getElementById('lblName').innerText = l.name;
            document.getElementById('lblPhone').innerText = l.phone;
            document.getElementById('sec2Title').innerText = l.sec2;
            document.getElementById('lblSummary').innerText = l.sum;
            document.getElementById('sec3Title').innerText = l.loc;
            document.getElementById('btnGPS').innerText = l.gps;
            document.getElementById('btnSubmit').innerText = l.submit;

            const carName = u.get('car') || (currentLang === 'ar' ? 'Ø³ÙŠØ§Ø±Ø© Ø²ÙØ§Ù' : 'Wedding Car');
            const colors = u.get('colors') || '';
            document.getElementById('summary').innerHTML = `
                <div class="flex justify-between"><span>${l.car}</span> <span>${carName}</span></div>
                <div class="text-[10px] text-amber-600 mt-2">${colors}</div>
            `;

            if(l.dir === 'ltr') {
                document.getElementById('formGrid').classList.remove('text-right');
                document.getElementById('formGrid').classList.add('text-left');
            }
        }

        window.onload = function() {
            initLang();
            map = L.map('map', {zoomControl: false}).setView([35.4687, 44.3921], 12);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            marker = L.marker([35.4687, 44.3921], {draggable: true}).addTo(map);
        };

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const c = [pos.coords.latitude, pos.coords.longitude];
                    map.setView(c, 16); marker.setLatLng(c);
                });
            }
        }

        function confirmWedding() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            const pos = marker.getLatLng();

            if(!name || !phone) {
                alert(data[currentLang].alert);
                return;
            }

            u.set('name', name);
            u.set('phone', phone);
            u.set('lat', pos.lat);
            u.set('lng', pos.lng);
            u.set('emoji', 'ğŸ’');
            u.set('lang', currentLang);

            window.location.href = `review.html?${u.toString()}`;
        }
    </script>
</body>
</html>
